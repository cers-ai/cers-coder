# 示例项目需求说明书

---

### 🧱 项目名称

智能任务管理系统

---

### 🎯 项目目标

构建一个基于AI的智能任务管理系统，帮助用户高效管理日常任务和项目。系统应该能够智能分析任务优先级，自动安排时间，并提供个性化的工作建议。

---

### 🔧 系统特性与设计原则

* **智能分析**：基于AI算法分析任务重要性和紧急程度，自动设置优先级
* **自动调度**：根据用户习惯和可用时间，智能安排任务执行顺序
* **多平台同步**：支持Web、移动端、桌面端多平台数据同步
* **团队协作**：支持团队任务分配、进度跟踪和协作功能
* **数据可视化**：提供直观的图表和报告，展示工作效率和进度
* **个性化推荐**：基于用户行为数据，提供个性化的时间管理建议

---

### 🧩 智能体构成与职责定义

| 智能体          | 职责                              |
| ------------ | ------------------------------- |
| **PM 智能体**   | 拆分任务阶段，组织各Agent工作，控制进度与输出对齐     |
| **需求分析智能体**  | 结构化提取业务需求，生成功能模型与用例文档           |
| **架构设计智能体**  | 输出系统模块图、接口定义、数据结构与技术选型          |
| **编码工程师智能体** | 基于架构完成代码开发，模块化输出，包含注释与文档        |
| **测试智能体**    | 自动生成测试用例与脚本，运行测试并反馈异常           |
| **构建部署智能体**  | 生成构建脚本（如 Dockerfile、CI），输出可执行程序 |
| **文档生成智能体**  | 自动输出开发说明、接口文档、架构图、用户指南等         |
| **审查智能体**    | 对阶段性成果进行一致性审查，发现问题并提出优化建议       |

---

### ⚙️ 工作流程设计

#### 📌 启动流程：

1. 用户在终端中启动本系统；
2. 系统自动检查当前目录，读取标准输入文件；
3. 若文件缺失或格式错误，终止并提示用户补全；
4. 成功解析后展示项目视图（功能结构树），由用户确认；
5. 用户确认后正式开始开发流程。

#### 🔁 开发流程：

1. **PM 智能体** 创建开发计划；
2. **需求分析智能体** 输出功能模型；
3. **架构设计智能体** 完成模块设计与接口定义；
4. **编码工程师智能体** 编写代码，分阶段推进；
5. **测试智能体** 对每一模块进行测试验证；
6. **构建部署智能体** 输出构建产物与部署脚本；
7. **文档生成智能体** 编写说明文档与架构可视化内容；
8. **审查智能体** 进行回顾、对比需求与实现，提供优化建议；
9. **最终输出** 写入 `out/` 目录：包含 `/src`、`/test`、`/docs`、`/build`、`/logs`、`/review` 等子目录。

---

### 📦 项目输出要求

| 目录/文件         | 描述                   |
| ------------- | -------------------- |
| `out/src/`    | 源代码文件，按模块组织          |
| `out/test/`   | 测试脚本与报告              |
| `out/docs/`   | 架构文档、接口文档、用户说明       |
| `out/build/`  | 构建产物，如可执行程序、镜像、配置    |
| `out/logs/`   | 开发过程日志与交互记录          |
| `out/review/` | 审查报告与改进建议            |
| `README.md`   | 项目说明入口，包含使用方法与模型配置建议 |

---

### 🔐 必要功能与运行约束

> 以下能力是该系统的核心竞争力，必须优先实现。

#### ✅ 持续性与断点恢复能力

* 支持**断点续开发**：中途中断后，能够自动加载状态并恢复任务执行；
* 所有开发状态必须保存在中间状态缓存文件中，支持重启时复现；
* 每一阶段需落盘快照（建议 `state/` 目录），PM Agent 负责调度恢复。

#### ✅ 良好的容错能力

* 智能体之间输出不一致时，应触发**协商与重构机制**；
* 当出现冲突、任务失败、文件缺失等情况，必须输出详细诊断日志；
* 支持**任务降级**策略，在部分模块异常时可局部回滚并继续整体开发。

#### ✅ 持久记忆与状态保持

* 系统需具备上下文记忆能力，至少能在单个项目范围内持续保有：
  * 功能-模块-代码之间的映射
  * 智能体之间的通信记录与决策过程
  * 用户的偏好设定与已采纳意见
* 推荐以 JSON 或 Markdown 格式存储记忆体（memory/），用于支持回溯与复盘。

#### ✅ 自我反思与多轮优化

* 支持每一阶段的**自我总结与复盘输出**，如：
  * 需求-架构-代码一致性检查
  * 模块设计是否冗余、耦合过高
  * 编码风格是否统一、是否遵循规则
* 支持用户触发 re-review 或 re-coding 操作，自动进入优化迭代流程

---

### 🤖 模型配置建议

* 本系统调用本地部署的 `ollama`，缺省使用 llama3:8b 。用户也通过配置文件或终端变量指定模型；
* 建议模型搭配如下：

| 阶段   | 推荐模型                |
| ---- | ------------------- |
| 架构设计 | llama3:8b, mistral:7b  |
| 代码生成 | deepseek-coder:6.7b, codellama:7b |
| 文档撰写 | llama3:8b, mixtral:8x7b     |

---

### 🛑 限制与边界

* 系统不通过 GUI 呈现任何内容，仅通过终端/文件输出；
* 不联网，不调用外部 API；
* 若缺失关键输入文件，应停止执行；
* 所有代码必须有注释，所有文档必须可读；
* 所有产出必须可被 PM 智能体自动组织为一个完整项目结构；

---

### 💡 技术要求

#### 后端技术栈
- **编程语言**: Python 3.12+
- **Web框架**: FastAPI
- **数据库**: PostgreSQL + Redis
- **AI集成**: 本地Ollama LLM
- **任务队列**: Celery

#### 前端技术栈
- **框架**: React 18+ with TypeScript
- **状态管理**: Redux Toolkit
- **UI组件**: Material-UI (MUI)
- **图表库**: Chart.js 或 D3.js
- **构建工具**: Vite

#### 部署要求
- **容器化**: Docker + docker-compose
- **反向代理**: Nginx
- **监控**: Prometheus + Grafana
- **日志**: ELK Stack (可选)

#### 开发规范
- **代码质量**: 使用 Black、isort、flake8
- **测试覆盖率**: > 80%
- **API文档**: 自动生成 OpenAPI 文档
- **版本控制**: Git with conventional commits

---

### 📋 核心功能需求

#### 用户管理
- 用户注册、登录、权限管理
- 个人资料和偏好设置
- 多租户支持（团队/组织）

#### 任务管理
- 任务创建、编辑、删除、归档
- 任务分类、标签、优先级设置
- 子任务和任务依赖关系
- 任务模板和批量操作

#### 智能功能
- AI驱动的任务优先级分析
- 智能时间估算和调度
- 个性化工作建议
- 自动任务分类和标签推荐

#### 协作功能
- 团队任务分配和跟踪
- 实时协作和评论
- 文件附件和共享
- 通知和提醒系统

#### 数据分析
- 工作效率统计和分析
- 项目进度可视化
- 个人和团队报告
- 数据导出功能

#### 集成能力
- 日历集成（Google Calendar、Outlook）
- 邮件集成
- 第三方工具集成（Slack、Teams）
- API接口提供

---

### 🎨 用户体验要求

- **响应式设计**: 支持桌面、平板、手机多端适配
- **直观易用**: 简洁的界面设计，符合用户习惯
- **快速响应**: 页面加载时间 < 2秒，操作响应 < 500ms
- **离线支持**: 基本功能支持离线使用
- **无障碍访问**: 符合WCAG 2.1 AA标准
- **多语言**: 支持中英文切换

---

### 🔒 安全要求

- **数据加密**: 传输和存储数据加密
- **身份认证**: JWT + 双因子认证
- **权限控制**: 基于角色的访问控制(RBAC)
- **审计日志**: 完整的操作审计记录
- **数据备份**: 自动化数据备份和恢复
- **隐私保护**: 符合GDPR等隐私法规

---

### 📈 性能要求

- **并发用户**: 支持1000+并发用户
- **数据容量**: 支持百万级任务数据
- **可扩展性**: 支持水平扩展
- **高可用性**: 99.9%服务可用性
- **灾难恢复**: RTO < 4小时，RPO < 1小时
